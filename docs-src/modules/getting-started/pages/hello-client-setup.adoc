= Installation

To use Kaskada within a Jupyter notebook you'll need to have the following pieces of software installed 

. https://realpython.com/installing-python/[Python] (version 3.6 and above) 
. https://docs.jupyter.org/en/latest/install/notebook-classic.html[Jupyter] 

Once you have both prerequisites installed ensure that you can run them. 
Open a terminal in your OS (command line prompt on Windows) and check the output of the following commands 

.Verifying Kaskada prerequisites. The output shown here is from an Ubuntu system--the output on your machine may vary.
[,shell]
----
$ python --version
Python 3.10.6


$ jupyter --version
Selected Jupyter core packages...
IPython          : 7.34.0
ipykernel        : 6.17.0
ipywidgets       : 8.0.2
jupyter_client   : 7.4.4
jupyter_core     : 4.11.2
jupyter_server   : 1.21.0
jupyterlab       : 3.6.1
nbclient         : 0.7.0
nbconvert        : 7.2.3
nbformat         : 5.7.0
notebook         : 6.5.2
qtconsole        : 5.3.2
traitlets        : 5.5.0
----


== Kaskada Client Installation

The first step in using Kaskada in a notebook is to install the Kaskada Python client package. 
Open a terminal in your OS and using `pip` install the Kaskada Python client.

.Installing Kaskada using pip
[,shell]
----
pip install kaskada 
----

[NOTE]
.Pip and pip3 
====
Depending on you Python installation and configuration you may have `pip3` instead of `pip` available in your terminal. 
If you do have `pip3` replace `pip` with `pip3` in your command, i.e., `pip3 install kaskada`
====

Now that we have everything installed let's fire up a notebook and get the remaining components of Kaskada installed.

Using a terminal start a new Jupyter notebook using the command 

.Start a Jupyter notebook.
[,shell]
----
jupyter notebook
----

The jupyter command should activate your browser and you can open a new notebook. 
Create a new code cell in your new notebook and enter the following code in the code cell. 

[,python]
----
from kaskada.api.session import LocalBuilder

session = LocalBuilder().build()
----

Run this cell inside your notebook and you should see some output similar to the following 

.Sample output of Kaskada's installation within a Jupyter notebook.
image::kaskada-install-output.png[Sample output of Kaskada installation within a Jupyter notebook]

This command imports the client's `LocalBuilder` and uses this builder to create a session. 
This is the first time we are running the builder on this machine. 
The builder will download (if needed) the latest release of Kaskada's components from GitHub and then run these components on your local machine. 
The command will generate some output during the download, install and run process. 

Let's now create a small table and write a simple query to see that everything is working correctly with our setup. 

== Verify our Kaskada Setup 

To verify that our installation is working we will 

. create a table for some sample data 
. load some sample date into our table 
. write a simple query to print out the contents of our table 


=== Create a table for some sample data

We will use the Kaskada client's `create_table` function to create our first table. 
Create a new code cell in your notebook and include the following code. 

.Table creation in Kaskada 
[,python]
----
import kaskada.table

kaskada.table.create_table(
    table_name = 'transactions',
    time_column_name = 'transaction_time', 
    entity_key_column_name = 'id')
----

Run this code cell and if the call is successful you should see something similar to the following.  

.Sample output from a call to `create_table`
image::create-table-output.png[Sample output from a call to create_table]


=== Loading some sample data into our table

Now that we have a table created let's load some data. We can use a small parquet file from the Kaskada project's testing data. 
Download and save this https://github.com/kaskada-ai/kaskada/raw/main/testdata/transactions/transactions_part1.parquet[test data file]. 
To make it easier to load make sure you save this test data file in the same folder from where we started the jupyter notebook above. 

Now let's create a new code cell in our notebook and add the following code inside this new code cell. 

.Loading data into the table using `table.load`.
[,python]
----
kaskada.table.load('transactions', 'transactions_part1.parquet')
----

Once the data load is complete you should see something similar to the following. 

.Sample output from data load
image::load-table-output.png[Sample output from data load]


==== Enable the Kaskada magic command and run a query 

Kaskada's client includes notebook customizations that allow us to write queries in the Fenl language but also receive and render the results of our queries in our notebooks. 
We need to enable these customizations first before we can use them. 

So in a new code cell input the following command and run this cell. 

.Enable fenlmagic in this notebook 
[,python]
----
%load_ext fenlmagic
----

Now we can start a code cell in our notebook with the first line being the string `%%fenl` to indicate that this cell will contain code in the Fenl language. 
The special string `%%fenl` will also connect to the Kaskada components that we installed that will execute the query and report back any results to our notebook. 

So let's try to write a simple query that lists all the rows in our table. 
In a new code cell input the following commands and run this cell.  

.Display all the contents of our table 
[,fenl]
----
%%fenl

transactions
----

The result of the query should look similar to the following. 

.Sample output querying the transactions table.
image::query-output.png[Sample output from querying the transactions table]

Congratulations, you now have Kaskada locally installed and you can start loading and querying your data using Kaskada inside a Jupyter notebook. 

